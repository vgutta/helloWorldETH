<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test message</title>

    <script src="./node_modules/web3/dist/web3.min.js"></script>

</head>
<body>
    <div class="container">

        <h1>Send a message through ETH</h1>

        <h2 id="theMessageR"></h2>

        <label for="name" class="col-lg-2 control-label">The Message:</label>
        <br>
        <input id="theMessageS" type="text">

        <button id="button">Send Message!</button>


    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

    <script>
       // Our future code here..
       //var web3 = new Web3("0x5359a06a08ef98f7d5a6d971a31cf81ec91958ee");
       if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        } else {
            web3 = new Web3(new Web3.providers.HttpProvider("http://127.0.0.1:8545"));
        }
       web3.eth.defaultAccount = web3.eth.accounts[0];
       var helloworldContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"_message","type":"string"}],"name":"setMessage","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getMessage","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"}]);
       var Coursetro = helloworldContract.at("0xbc64f9d694cb56ab38a65a767ca6d4d01952306f");
       console.log(Coursetro);

       Coursetro.getMessage(function(error, result){
            if(!error){
                $("#theMessageR").html(result[0]);

            }

            else
                console.error(error);
        });
        $("#button").click(function() {
            Coursetro.setMessage($("#theMessageS").val());

       });

    </script>



</body>
</html>
